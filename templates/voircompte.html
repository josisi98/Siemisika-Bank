{% extends "base.html" %}

{% block title %}Voir les détails du compte{% endblock %}

{% block content %}
<div class = "row col-md-8 my-5">
    <div class="card col-md-8 mx-auto px-0">
        <div class="card-header text-center" style="color:#070439;background-color:#ff7302; font-size:18px;font-weight:bold;">
            VOIR LES DETAILS DU COMPTE
        </div>
        <div class="card-body" style="background-color:#070439">
            {% if data %}
            {% for i in data %}
            <div class="row mb-4" style="color:#fff;font-weight:bold;">
                <table class="table table-bordered" style="color:#fff">
                    <tbody>
                        <tr style="color:#fff; font-weight:bold;">
                            <td>
                                ID du Client
                            </td>
                            <td>
                                {{ i.id_client }}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                ID du Compte
                            </td>
                            <td>
                                {{ i.id_compte }}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Type du Compte
                            </td>
                            <td>
                                {{ i.type_de_compte }}
                            </td>
                        </tr>
                        <tr>
                            <td>
                               Solde
                            </td>
                            <td>
                                {{ i.balance }}
                            </td>
                        </tr>
                        <tr>
                            <td>
                               Statut
                            </td>
                            <td>
                                <span class="badge bg-success text-center">{{ i.statut }}</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="row mb-4 col-md-12">
                <div class="form-group d-flex col-md-12">
                    {% if session['user_type']=="gestionnaire" %}
                        {% if i.statut == 'activer' %}
                        <a href="{{ url_for('supprimercompte') }}">
                            <button class="btn float-right" style="color:#070439;background-color:#ff7302;font-weight:bold; font-size:18px;">Supprimer</button>
                        </a>
                        {% else %}
                            <a href="{{ url_for('activercompte',id_compte=i.id_compte ) }}">
                                <button class="btn float-right">Activer</button>
                            </a>
                        {% endif %}
                    {% elif session['user_type']=="caissier" %}
                        {% if i.statut == 'activer' %}
                            <div class="col-md-4">
                                <a href="{{ url_for('depot',id_compte=i.id_compte ) }}">
                                    <button class="btn">Dépôt</button>
                                </a>
                            </div>
                            {% if data|length > 1 %}
                                <div class="col-md-4">
                                    <a href="{{ url_for('transfert',id_client=i.id_client) }}">
                                        <button class="btn">Transfert</button>
                                    </a>
                                </div>
                            {% endif %}
                            <div class="col-md-4">
                                <a href="{{ url_for('retrait',id_compte=i.id_compte ) }}">
                                    <button class="btn">Retrait</button>
                                </a>
                            </div>
                        {% endif %}
                    {%endif%}
                </div>
            </div>
            {%endfor%}
            {%else%}
            <form class="row gy-2 gx-3 align-items-center" action="ajoutcompte" method="POST" style="height: 40vh; display: contents;"  >
                <div class="col-auto">
                    <label class="m-auto pr-3" for="id_compte" style="color:#fff ; font-weight:bold; font-size:16px;">ID COMPTE</label>
                    <input class="form-control" name="id_compte" id="id_compte" type="textfield" placeholder="ID Compte" minlength="9" maxlength="9">
                </div>
                <br>
                <br>
                <div class="form-group input-group mb-3">
                    <label class="m-auto pr-3" style="color:#fff ;font-weight:bold; font-size:16px;">OU</label>
                </div>
                <div class="col-auto" >
                    <label class="m-auto pr-3" for="id_compte" style="color:#fff; font-weight:bold; font-size:16px;">ID COMPTE</label>
                   <input class="form-control" name="id_compte" id="id_compte" type="textfield" placeholder="ID Compte" minlength="9" maxlength="9">
                </div>
                <br>
                <div class="form-group col-12 text-center" >
                    <input type="submit" value="Voir" class="btn mx-auto" style="color:#070439;background-color:#ff7302;font-weight:bold; font-size:18px;">
                </div>
              </form>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}